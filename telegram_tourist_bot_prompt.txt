# üß© –ü—Ä–æ–º—Ç –¥–ª—è –ò–ò: —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ Telegram-–±–æ—Ç–∞

**–ó–∞–¥–∞—á–∞:**  
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Telegram-–±–æ—Ç–∞ –Ω–∞ **Python** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ **`aiogram`**, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ **Excel (.xlsx)** —Ñ–∞–π–ª–∞ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–∫–∞—Ç—å, —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∏ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º.

---

## üì¶ 1. –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
–ë–æ—Ç –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å —Å **Excel-—Ñ–∞–π–ª–æ–º (`.xlsx`)**, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç–æ–ª–±—Ü—ã:

| –ü–æ–ª–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----------|
| **id** | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ–±—ä–µ–∫—Ç–∞ |
| **address** | –ê–¥—Ä–µ—Å (—Å—Ç—Ä–æ–∫–∞) |
| **coordinate** | –°—Ç—Ä–æ–∫–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `"POINT (longitude latitude)"` |
| **description** | –û–ø–∏—Å–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ |
| **title** | –ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ |
| **category_id** | –ß–∏—Å–ª–æ–≤–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ |
| **url** | –°—Å—ã–ª–∫–∞ –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫ –∏–ª–∏ —Å–∞–π—Ç –æ–±—ä–µ–∫—Ç–∞ |

–ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–æ—Ç –¥–æ–ª–∂–µ–Ω:
1. –ü—Ä–æ—á–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ Excel-—Ñ–∞–π–ª–∞ —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `pandas` –∏–ª–∏ `openpyxl`.
2. –†–∞—Å–ø–∞—Ä—Å–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–∑ —Å—Ç—Ä–æ–∫–∏ `"POINT (x y)"` –≤ –¥–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —á–∏—Å–ª–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è:  
   ```python
   longitude, latitude = map(float, coordinate_str.replace("POINT (", "").replace(")", "").split())
   ```
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏—Ö –≤ —É–¥–æ–±–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π –∏–ª–∏ DataFrame).

---

## ‚öôÔ∏è 2. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **–Ø–∑—ã–∫:** Python 3.10+
- **–§—Ä–µ–π–º–≤–æ—Ä–∫:** `aiogram` (–≤–µ—Ä—Å–∏—è 3.x)
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏:** `pandas`, `openpyxl`, `geopy`
- **–¢–∏–ø —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:** –ª–æ–∫–∞–ª—å–Ω—ã–π Excel-—Ñ–∞–π–ª
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞:** –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:** –º–æ–¥—É–ª—å–Ω–∞—è, —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –ø–æ —Ñ—É–Ω–∫—Ü–∏—è–º

---

## üìÅ 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
project_root/
‚îÇ
‚îú‚îÄ‚îÄ main.py                # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ config.py              # –¢–æ–∫–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ cultural_objects_mnn.xlsx       # –ò—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª —Å –¥–∞–Ω–Ω—ã–º–∏
‚îÇ
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îú‚îÄ‚îÄ start_handler.py
‚îÇ   ‚îú‚îÄ‚îÄ search_handler.py
‚îÇ   ‚îú‚îÄ‚îÄ category_handler.py
‚îÇ   ‚îî‚îÄ‚îÄ location_handler.py
‚îÇ
‚îî‚îÄ‚îÄ utils/
    ‚îú‚îÄ‚îÄ data_loader.py     # –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –ø–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Excel
    ‚îú‚îÄ‚îÄ geo_utils.py       # –†–∞—Å—á—ë—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π (–•–∞–≤–µ—Ä—Å–∞–π–Ω)
    ‚îî‚îÄ‚îÄ paginator.py       # –ü–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–∞—è –≤—ã–¥–∞—á–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```

---

## üí¨ 4. –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### üîπ –ö–æ–º–∞–Ω–¥–∞ `/start`
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π.
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ–Ω—é (—á–µ—Ä–µ–∑ **inline-–∫–Ω–æ–ø–∫–∏**):
  - üîç –ù–∞–π—Ç–∏ –æ–±—ä–µ–∫—Ç –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é  
  - üìç –ù–∞–π—Ç–∏ –æ–±—ä–µ–∫—Ç—ã —Ä—è–¥–æ–º  
  - üß≠ –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏  

---

### üîπ –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é.
2. –ë–æ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç.
3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø–æ–∏—Å–∫ (–±–µ–∑ —É—á—ë—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞) –ø–æ –ø–æ–ª—é `title`.
4. –ù–∞–π–¥–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
   ```
   üè∑ <b>–ù–∞–∑–≤–∞–Ω–∏–µ:</b> {title}
   üìç <b>–ê–¥—Ä–µ—Å:</b> {address}
   üó∫ <b>–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:</b> {latitude}, {longitude}
   üîó <b>URL:</b> {url}
   üóÇ <b>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</b> {category_id}
   ```
5. –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ ‚Äî –±–æ—Ç –≤—ã–≤–æ–¥–∏—Ç –∏—Ö **–ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ** (–ø–æ 5 –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É).

---

### üîπ –ü–æ–∏—Å–∫ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç **–≥–µ–æ–ª–æ–∫–∞—Ü–∏—é** –∏–ª–∏ –≤—Ä—É—á–Ω—É—é –≤–≤–æ–¥–∏—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã.  
2. –ë–æ—Ç –∏—â–µ—Ç –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã –≤ —Ä–∞–¥–∏—É—Å–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, **2 –∫–º** –æ—Ç –∑–∞–¥–∞–Ω–Ω–æ–π —Ç–æ—á–∫–∏.  
3. –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø–æ **—Ñ–æ—Ä–º—É–ª–µ –•–∞–≤–µ—Ä—Å–∞–π–Ω–∞** –∏–ª–∏ —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É `geopy.distance`.  
4. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –≤–∏–¥–µ —Å–ø–∏—Å–∫–∞, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é.

---

### üîπ –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–π
1. –ë–æ—Ç –∏–∑–≤–ª–µ–∫–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ `category_id` –∏–∑ –¥–∞—Ç–∞—Å–µ—Ç–∞.
2. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –≤ –≤–∏–¥–µ –∫–Ω–æ–ø–æ–∫.
3. –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ‚Äî –±–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π).

---

### üîπ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö:
  - ‚ùå "–û–±—ä–µ–∫—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"
  - ‚ö†Ô∏è "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç"
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫—Ä—ã—Ç—å —Å—Å—ã–ª–∫—É (`url`) –Ω–∞ –æ–±—ä–µ–∫—Ç.
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ –≤ –ø–∞–º—è—Ç–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).

---

## üß≠ 5. –ü—Ä–∏–º–µ—Ä –¥–∏–∞–ª–æ–≥–∞

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** `/start`  
**–ë–æ—Ç:**  
–ü—Ä–∏–≤–µ—Ç! üëã –Ø –ø–æ–º–æ–≥—É –Ω–∞–π—Ç–∏ –æ–±—ä–µ–∫—Ç—ã –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏ –∏–ª–∏ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é.  
–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:  

**–ö–Ω–æ–ø–∫–∏:**  
üîç –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é | üìç –†—è–¥–æ–º —Å–æ –º–Ω–æ–π | üß≠ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏  

---

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** üîç –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é  
**–ë–æ—Ç:** –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞:  

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** –ø–∞—Ä–∫  
**–ë–æ—Ç:**  
üè∑ <b>–ü–∞—Ä–∫ –ü–æ–±–µ–¥—ã</b>  
üìç —É–ª. –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è, 1  
üó∫ 56.3315, 44.0033  
üîó [–û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç](https://example.com/park)  
üóÇ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: 3

---

## üß† 6. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å FSM –∏–∑ aiogram –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤.
- –î–æ–±–∞–≤–∏—Ç—å `logging` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `load_data()` –¥–ª—è —á—Ç–µ–Ω–∏—è Excel:
  ```python
  import pandas as pd

  def load_data(path: str):
      df = pd.read_excel(path)
      df["longitude"] = df["coordinate"].apply(lambda s: float(s.split()[1][1:]))
      df["latitude"] = df["coordinate"].apply(lambda s: float(s.split()[2][:-1]))
      return df
  ```
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ HTML –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π.
- –í—Å–µ —Ç–µ–∫—Å—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.
